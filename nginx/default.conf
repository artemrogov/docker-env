server {
        listen 80;
        listen [::]:80;
        
        server_name  gstd2.test;
        
        index index.php index.html index.htm;

 
      location / {
         proxy_pass http://frontend_service:3000; # this one here
         proxy_redirect off;
      }
       
      location /api-backend {
        alias /var/www/html;
        try_files $uri $uri/ @laravel;
        
         location ~ \.php$ {
                fastcgi_pass api_backend:9000;
                fastcgi_index index.php;
                include fastcgi_params;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_param PATH_INFO $fastcgi_path_info;
        }

        location ~ /\.(?!well-known).* {
           deny all;
        }
     }
     
     
  
     location @laravel {
         rewrite /api-backend/(.*)$ /api-backend/index.php?/$1 last;
     }
}
